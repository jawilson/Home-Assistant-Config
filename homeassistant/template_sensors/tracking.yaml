- trigger:
    - platform: event
      event_type: 'android.intent_received'
      context:
        user_id: e153c700e62f4120a579fc1b66af609d
      event_data:
        intent: 'com.urbandroid.sleep.alarmclock.SLEEP_TRACKING_STARTED_AUTO'
    - platform: event
      event_type: 'android.intent_received'
      context:
        user_id: e153c700e62f4120a579fc1b66af609d
      event_data:
        intent: 'com.urbandroid.sleep.alarmclock.SLEEP_TRACKING_STOPPED_AUTO'
  binary_sensor:
    - name: "Sasha Sleeping"
      unique_id: 'sasha_sleeping'
      state: >
        {{ 'on' if trigger.event.data.intent.endswith('SLEEP_TRACKING_STARTED_AUTO') else 'off' }}
      icon: >
        {% if trigger.event.data.intent.endswith('SLEEP_TRACKING_STARTED_AUTO') %}
          mdi:sleep
        {% else %}
          mdi:sleep-off
        {% endif %}

- trigger:
    - platform: event
      event_type: 'android.intent_received'
      context:
        user_id: e153c700e62f4120a579fc1b66af609d
      event_data:
        intent: 'com.urbandroid.sleep.alarmclock.SMART_PERIOD_AUTO'
    - platform: event
      event_type: 'android.intent_received'
      context:
        user_id: e153c700e62f4120a579fc1b66af609d
      event_data:
        intent: 'com.urbandroid.sleep.alarmclock.ALARM_ALERT_START_AUTO'
    - platform: event
      event_type: 'android.intent_received'
      context:
        user_id: e153c700e62f4120a579fc1b66af609d
      event_data:
        intent: 'com.urbandroid.sleep.alarmclock.ALARM_ALERT_DISMISS_AUTO'
    - platform: event
      event_type: 'android.intent_received'
      context:
        user_id: e153c700e62f4120a579fc1b66af609d
      event_data:
        intent: 'com.urbandroid.sleep.alarmclock.ALARM_SNOOZE_CLICKED_ACTION_AUTO'
    - platform: event
      event_type: 'android.intent_received'
      context:
        user_id: e153c700e62f4120a579fc1b66af609d
      event_data:
        intent: 'com.urbandroid.sleep.alarmclock.TIME_TO_BED_ALARM_ALERT_AUTO'
  sensor:
    - name: "Sasha Alarm"
      unique_id: 'sasha_alarm'
      state: >
        {% if trigger.event.data.intent.endswith('SMART_PERIOD_AUTO') %}
          Smart Period
        {%- elif trigger.event.data.intent.endswith('ALARM_ALERT_START_AUTO') %}
          Ringing
        {%- elif trigger.event.data.intent.endswith('ALARM_ALERT_DISMISS_AUTO') %}
          Dismissed
        {%- elif trigger.event.data.intent.endswith('ALARM_SNOOZE_CLICKED_ACTION_AUTO') %}
          Snoozed
        {%- elif trigger.event.data.intent.endswith('TIME_TO_BED_ALARM_ALERT_AUTO') %}
          Bedtime
        {%- endif %}
      icon: >
        {% if trigger.event.data.intent.endswith('SMART_PERIOD_AUTO') %}
          mdi:alarm-check
        {%- elif trigger.event.data.intent.endswith('ALARM_ALERT_START_AUTO') %}
          mdi:alarm
        {%- elif trigger.event.data.intent.endswith('ALARM_ALERT_DISMISS_AUTO') %}
          mdi:alarm-off
        {%- elif trigger.event.data.intent.endswith('ALARM_SNOOZE_CLICKED_ACTION_AUTO') %}
          mdi:alarm-snooze
        {%- elif trigger.event.data.intent.endswith('TIME_TO_BED_ALARM_ALERT_AUTO') %}
          mdi:bed
        {% else %}
          mdi:help
        {% endif %}

